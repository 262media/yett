!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.scriptBlocker={})}(this,function(e){"use strict";let t=window.SCRIPT_BLOCKER_BLACKLIST;let r=!1,c=[];const n=(e,c)=>!r&&(!c||"javascript/blocked"!==c)&&t.some(t=>t.test(e)),o=new MutationObserver(e=>{e.forEach(({addedNodes:e})=>{e.forEach(e=>{if(1===e.nodeType&&"SCRIPT"===e.tagName){const t=e.src||"",r=e.type;if(n(t,r)){c.push(e.cloneNode()),e.type="javascript/blocked";const t=function(r){"javascript/blocked"===e.getAttribute("type")&&r.preventDefault(),e.removeEventListener("beforescriptexecute",t)};e.addEventListener("beforescriptexecute",t),e.parentElement.removeChild(e)}}})})});o.observe(document.documentElement,{childList:!0,subtree:!0});const s=Object.getOwnPropertyDescriptors(HTMLScriptElement.prototype),i=document.createElement;document.createElement=function(...e){if("script"!==e[0].toLowerCase())return i.bind(document)(...e);const t=i.bind(document)(...e);return Object.defineProperties(t,{src:{get(){return s.src.get.call(this)},set(e){return n(e,t.type)&&(t.type="javascript/blocked"),s.src.set.call(this,e)}},type:{set(e){return s.type.set.call(this,n(t.src,t.type)?"javascript/blocked":e)}}}),t.setAttribute=function(e,r){"type"===e||"src"===e?t[e]=r:HTMLScriptElement.protytope.setAttribute.call(t,e,r)},t};const p=function(e){const c=e.getAttribute("src");return r||t.every(e=>!e.test(c))};e.unblock=function(...e){r||(o.disconnect(),!e||e.length<1?r=!0:t=t.filter(t=>e.every(e=>!t.test(e))),Array.from(document.querySelectorAll('script[type="javascript/blocked"]')).forEach(e=>{p(e)&&(e.type="application/javascript",c.push(e),e.parentElement.removeChild(e))}),c=c.reduce((e,t)=>{if(p(t)){const r=document.createElement("script");return r.setAttribute("src",t.src),document.head.appendChild(r),e}return[...e,t]},[]))},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=script-blocker.min.js.map

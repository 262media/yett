!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.scriptBlocker={})}(this,function(e){"use strict";let t=window.SCRIPT_BLOCKER_BLACKLIST;const r="javascript/blocked";let n=!1,c=[];const o=document.getElementsByTagName("head")[0],s=(e,c)=>!n&&(!c||c!==r)&&t.some(t=>t.test(e)),i=new MutationObserver(e=>{e.forEach(({addedNodes:e})=>{e.forEach(e=>{if(1===e.nodeType&&"SCRIPT"===e.tagName){const t=e.src||"",n=e.type;s(t,n)&&(c.push(e.cloneNode()),e.type=r,e.addEventListener("beforeload",function(t){e.getAttribute("type")===r&&t.preventDefault()}),e.addEventListener("beforescriptexecute",function(t){e.getAttribute("type")===r&&t.preventDefault()}),e.parentElement.removeChild(e))}})})});i.observe(document.documentElement,{childList:!0,subtree:!0});const p=Object.getOwnPropertyDescriptors(HTMLScriptElement.prototype),u=document.createElement;document.createElement=function(...e){if("script"!==e[0].toLowerCase())return u.bind(document)(...e);const t=u.bind(document)(...e);return Object.defineProperties(t,{src:{get(){return p.src.get.call(this)},set(e){return s(e,t.type)&&(t.type=r),p.src.set.call(this,e)}},type:{set(e){return p.type.set.call(this,s(t.src,t.type)?r:e)}}}),t.setAttribute=function(e,r){"type"===e||"src"===e?t[e]=r:HTMLScriptElement.protytope.setAttribute.call(t,e,r)},t};const d=function(e){const r=e.getAttribute("src");return n||t.every(e=>!e.test(r))};e.unblock=function(...e){n||(i.disconnect(),!e||e.length<1?n=!0:t=t.filter(t=>e.every(e=>!t.test(e))),Array.from(document.getElementsByTagName("script")).forEach(e=>{e.getAttribute("type")===r&&d(e)&&(e.type="application/javascript",c.push(e),e.parentElement.removeChild(e))}),(c=c.reduce((e,t)=>{if(d(t)){const r=document.createElement("script");return r.setAttribute("src",t.src),o.appendChild(r),e}return[...e,t]},[])).forEach(e=>{if(d(e)){const t=document.createElement("script");t.setAttribute("src",e.src),o.appendChild(t)}}))},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=script-blocker.min.js.map
